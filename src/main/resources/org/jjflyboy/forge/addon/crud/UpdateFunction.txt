import javax.persistence.EntityManager;
import java.util.function.Function;
import javax.inject.Inject;

public class UpdateFunction<T> implements IUpdateFunction<T> {
	@Inject
	private EntityManager entityManager;

	@Override
	public T apply(T original, Function<T,T> updater) {
		T merged = entityManager.merge(original);
		return updater.apply(merged);
	}
}

